name: 'Assign'
description: 'Assign to issue or pr'
inputs:
  repo:
    description: 'Repository name to assign'
    required: true
  issue_num:
    description: 'Issue number to assign'
    required: true
  args:
    description: 'Arguments for slash command'
    required: false
  actor:
    description: 'Github actor'
    required: false
  token:
    description: 'GITHUB_TOKEN to run this action'
    required: true
runs:
  using: "composite"
  steps:
    - name: Assign to issue or pr
      shell: bash
      run: |
        if [ -n "${ARGS}" ];then
          i=0
          for person in ${ARGS};do
            if [ $i -ne 0 ];then
              people="${people}, "
            fi
            people="${people}\"${person}\""
            i=`expr $i + 1`
          done
        else
          people="\"${{ github.actor }}\""
        fi

        echo "{\"assignees\":[${people}]}" | \
              gh api repos/${REPO}/issues/${ISSUE_NUM}/assignees -X POST --input -
      env:
        REPO: ${{ inputs.repo }}
        ISSUE_NUM: ${{ inputs.issue_num }}
        ARGS: ${{ inputs.args }}
        ACTOR: ${{ inputs.actor }}
        GITHUB_TOKEN: ${{ inputs.token }}
